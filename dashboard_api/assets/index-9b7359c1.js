import{c7 as j,cb as W,cd as Y,c8 as q,bX as G,bW as H}from"./index-27b2444c.js";import{g as J,a as K}from"./article-3807ff6a.js";import{r as o,w as O,bs as P,a3 as n,j as i,k as y,D as l,x as t,u as x,e as Q,F as B,X as V,v as L,B as b,C as v,Y as Z}from"./_plugin-vue_export-helper-a4851b7b.js";const u=j.global.t;function f(){return[{label:u("msg.article.title"),prop:"title"},{label:u("msg.article.author"),prop:"author"},{label:u("msg.article.publicDate"),prop:"publicDate"},{label:u("msg.article.desc"),prop:"desc"},{label:u("msg.article.action"),prop:"action"}]}const D=o(f()),p=o(f().map(s=>s.label));W(()=>{D.value=f(),p.value=f().map(s=>s.label)});const C=o([]);O(p,s=>{C.value=[];const d=D.value.filter(c=>s.includes(c.label));C.value.push(...d)},{immediate:!0});const ee={__name:"index",setup(s){const d=o([]),c=o(1),w=o(0),g=o(20);async function m(){const e=await J({page:c.value,per_page:g.value});d.value=e.data.articles,w.value=e.data.pagination.total}m();function T(e){g.value=e,m()}function E(e){c.value=e,m()}const R=Y(),h=q();function U(e){G.confirm(h.t("msg.excel.dialogTitle1")+e.title+h.t("msg.excel.dialogTitle2"),{type:"warning"}).then(async()=>{await K(e.id),H.success(h.t("msg.excel.removeSuccess")),await m()}).catch(()=>{})}function A(e){R.push(`/article/${e.id}`)}return(e,r)=>{const F=n("el-checkbox"),I=n("el-checkbox-group"),z=n("el-card"),S=n("el-table-column"),$=n("el-button"),M=n("el-table"),N=n("el-pagination");return i(),y("div",null,[l(z,{shadow:"hover",class:"header-container"},{default:t(()=>[l(I,{modelValue:x(p),"onUpdate:modelValue":r[0]||(r[0]=a=>Q(p)?p.value=a:null)},{default:t(()=>[(i(!0),y(B,null,V(x(D),(a,k)=>(i(),L(F,{key:k,label:a.label},{default:t(()=>[b(v(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(z,{class:"table-container",shadow:"never"},{default:t(()=>[l(M,{data:d.value,border:""},{default:t(()=>[l(S,{label:"#",type:"index",width:"50",align:"center"}),(i(!0),y(B,null,V(x(C),(a,k)=>(i(),L(S,{label:a.label,prop:a.prop,key:k},Z({_:2},[a.prop==="publicDate"?{name:"default",fn:t(({row:_})=>[b(v(e.$filters.relativeTime(_.publicDate)),1)]),key:"0"}:a.prop==="action"?{name:"default",fn:t(({row:_})=>[l($,{type:"primary",size:"small",onClick:X=>A(_)},{default:t(()=>[b(v(e.$t("msg.article.show")),1)]),_:2},1032,["onClick"]),l($,{type:"danger",size:"small",onClick:X=>U(_)},{default:t(()=>[b(v(e.$t("msg.article.remove")),1)]),_:2},1032,["onClick"])]),key:"1"}:void 0]),1032,["label","prop"]))),128))]),_:1},8,["data"])]),_:1}),l(N,{class:"pagination","current-page":c.value,"onUpdate:current-page":r[1]||(r[1]=a=>c.value=a),"page-size":g.value,"onUpdate:page-size":r[2]||(r[2]=a=>g.value=a),"page-sizes":[2,10,30],layout:"sizes, prev, pager, next, total",total:w.value,onSizeChange:T,onCurrentChange:E},null,8,["current-page","page-size","total"])])}}},ne=P(ee,[["__scopeId","data-v-a6c7b726"]]);export{ne as default};
