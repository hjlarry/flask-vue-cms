import{s as V,a as $,b as D,g as P}from"./role-fd6cbb35.js";import{c8 as N,bW as R}from"./index-27b2444c.js";import{r,w,a3 as n,j as g,v as C,x as s,l as B,D as l,B as b,C as y,ad as I,k as x,y as K}from"./_plugin-vue_export-helper-a4851b7b.js";const S={__name:"showPermission",props:{modelValue:{required:!0,type:Boolean},roleId:{required:!0,type:Number}},emits:["update:modelValue"],setup(p,{emit:m}){const c=p;function o(){m("update:modelValue",!1)}const u=N();async function _(){await V(c.roleId,{permissions:a.value.getCheckedKeys()}),R.success(u.t("msg.role.updateRoleSuccess")),a.value.setCheckedKeys([]),o()}const e=r({children:"children",label:"permission_name"}),d=r([]),a=r(null);async function f(){d.value=(await $()).data;const t=await D(c.roleId);a.value.setCheckedKeys(t.data)}return w(()=>c.roleId,t=>{t&&f()}),(t,h)=>{const v=n("el-tree"),i=n("el-button"),k=n("el-dialog");return g(),C(k,{"model-value":p.modelValue,onClose:o,title:t.$t("msg.excel.roleDialogTitle")},{footer:s(()=>[B("span",null,[l(i,{onClick:o},{default:s(()=>[b(y(t.$t("msg.universal.cancel")),1)]),_:1}),l(i,{onClick:_,type:"primary"},{default:s(()=>[b(y(t.$t("msg.universal.confirm")),1)]),_:1})])]),default:s(()=>[l(v,{data:d.value,props:e.value,ref_key:"treeRef",ref:a,"show-checkbox":"","node-key":"id","default-expand-all":"","check-strictly":""},null,8,["data","props"])]),_:1},8,["model-value","title"])}}},q={class:""},z={__name:"index",setup(p){const m=r([]);async function c(){m.value=await(await P()).data}c();const o=r(!1),u=r(NaN);function _(e){o.value=!0,u.value=e.id}return w(o,e=>{e||(u.value=NaN)}),(e,d)=>{const a=n("el-table-column"),f=n("el-button"),t=n("el-table"),h=n("el-card"),v=I("permission");return g(),x("div",q,[l(h,{shadow:"never"},{default:s(()=>[l(t,{data:m.value,border:""},{default:s(()=>[l(a,{label:e.$t("msg.role.index"),type:"index",width:"120",align:"center"},null,8,["label"]),l(a,{label:e.$t("msg.role.name"),prop:"title"},null,8,["label"]),l(a,{label:e.$t("msg.role.desc"),prop:"description"},null,8,["label"]),l(a,{label:e.$t("msg.role.action"),prop:"action",align:"center"},{default:s(({row:i})=>[K((g(),C(f,{type:"primary",size:"small",onClick:k=>_(i)},{default:s(()=>[b(y(e.$t("msg.role.assignPermissions")),1)]),_:2},1032,["onClick"])),[[v,["distributePermission"]]])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),l(S,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i),"role-id":u.value},null,8,["modelValue","role-id"])])}}};export{z as default};
